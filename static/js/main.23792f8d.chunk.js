(this["webpackJsonpslot-mashine"]=this["webpackJsonpslot-mashine"]||[]).push([[0],{49:function(e){e.exports=JSON.parse('[{"title":"3xBAR","payouts":{"top":50,"center":50,"bottom":50}},{"title":"BAR","payouts":{"top":10,"center":10,"bottom":10}},{"title":"2XBAR","payouts":{"top":20,"center":20,"bottom":20}},{"title":"7","payouts":{"top":150,"center":150,"bottom":150}},{"title":"CHERRY","payouts":{"top":2000,"center":1000,"bottom":4000}}]')},58:function(e,t,n){e.exports=n(69)},63:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(7),o=n.n(r),s=(n(63),n(13)),c=n(11),u=n(16),l=n(17),p=n(18),d=n(105),m=n(106),f=n(108),h=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).symbolHeight=141,n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){"function"===typeof window.matchMedia&&window.matchMedia("(max-width: 768px)").matches&&(this.symbolHeight=94)}},{key:"render",value:function(){var e=this.props.backgroundShift;return i.a.createElement("div",{className:"reel-container"},i.a.createElement("div",{className:"reel",style:{backgroundPosition:"0px ".concat(e*this.symbolHeight*-1,"px")}}))}}]),t}(a.Component),b=[{name:"3xBAR",pic:"3XBAR.png"},{name:"BAR",pic:"BAR.png"},{name:"2xBAR",pic:"2XBAR.png"},{name:"7",pic:"7.png"},{name:"Cherry",pic:"Cherry.png"}],g=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={positions:[[0,1,2,3,4],[0,1,2,3,4],[0,1,2,3,4]],currentPositions:[[0,1,2,3,4],[0,1,2,3,4],[0,1,2,3,4]],spinsCount:0},n.spinReel=function(e){var t=n.state.currentPositions,a=Math.floor(Math.random()*b.length)+1,i=t[e],r=i.slice(a);r=r.concat(i.slice(0,a)),n.onSpinReel(e,r)},n.onSpinReel=function(e,t){var a=n.state.currentPositions;a[e]=t,n.setState({currentPositions:a,spinsCount:n.state.spinsCount+1})},n.doSpinReels=function(e){n.setState({spinsCount:0},(function(){n.timer=setInterval((function(){n.spinReel(0),n.spinReel(1),n.spinReel(2)}),300),setTimeout((function(){clearInterval(n.timer),n.updatePositionsCascade(),e(n.getWinInfo(n.state.currentPositions),n.state.spinsCount)}),3e3)}))},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){if(this.props.isSpinning&&!e.isSpinning&&this.doSpinReels(this.props.onStopSpin),this.props.isDebugMode&&3===this.props.backgroundShifts.length&&JSON.stringify(this.props.backgroundShifts)!==JSON.stringify(e.backgroundShifts)){var t=this.getPositionsByShifts(),n=this.getWinInfo(t);this.props.onStopSpin(n)}}},{key:"getWinInfo",value:function(e){return{top:e.map((function(e){return e[0]})),center:e.map((function(e){return e[1]})),bottom:e.map((function(e){return e[2]}))}}},{key:"getPositionsByShifts",value:function(){for(var e=this.props.backgroundShifts,t=[0,1,2,3,4],n=[],a=0;a<e.length;a++){var i=e[a],r=t.slice(i);r=r.concat(t.slice(0,i)),n[a]=r}return n}},{key:"updatePositionsCascade",value:function(){var e=this,t=this.state,n=t.currentPositions,a=t.positions,i=function(t){return new Promise((function(i){a[t]=n[t],e.setState({positions:a},(function(){setTimeout((function(){return i(t)}),500)}))}))};i(0).then((function(e){return i(e+1).then((function(e){return i(e+1)}))}))}},{key:"render",value:function(){var e=this.state,t=e.currentPositions,n=e.positions,a=this.props,r=a.isSpinning,o=a.isDebugMode,s=a.backgroundShifts,c=r?t:n;return i.a.createElement("div",{className:"slot-container"},Array.from([0,1,2]).map((function(e){return i.a.createElement(h,{key:e,idx:e,backgroundShift:o?s[e]:c[e][0]})})))}}]),t}(a.Component),v=n(9),y=n(107),S=n(109),O=n(103),k=n(104),E=n(48),w=n.n(E);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var C=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={debug:[]},n.handleChange=function(e,t,a){return function(a){var i=a.target.value,r=n.state.debug;r[e]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(n,!0).forEach((function(t){Object(v.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r[e],Object(v.a)({},t?"symbol":"position",i)),n.setState({debug:r})}},n.doApply=function(){var e=n.state.debug.map((function(e){return e.symbol-e.position}));n.props.onApply(e)},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state.debug;return i.a.createElement("div",{className:"debug-container"},i.a.createElement("div",{className:"debug-fields"},Array.from([0,1,2]).map((function(n){return function(n){var a=(t[n]||{}).symbol,r=(t[n]||{}).position;return i.a.createElement("div",{key:n,className:"col"},i.a.createElement("div",{className:"col-header"},"Reel #".concat(n+1)),i.a.createElement(y.a,{select:!0,value:void 0!==a?a:"",onChange:e.handleChange(n,!0),InputProps:{startAdornment:i.a.createElement(O.a,{position:"start"},"Symbol")}},b.map((function(e,t){return i.a.createElement(S.a,{key:t,value:t},e.name)}))),i.a.createElement(y.a,{select:!0,value:void 0!==r?r:"",onChange:e.handleChange(n,!1),InputProps:{startAdornment:i.a.createElement(O.a,{position:"start"},"Position")}},Array.from(["top","center","bottom"]).map((function(e,t){return i.a.createElement(S.a,{key:t,value:t},e)}))))}(n)}))),i.a.createElement("div",{className:"debug-actions"},i.a.createElement(k.a,{color:"secondary",onClick:this.doApply,disabled:3!==t.length},i.a.createElement(w.a,null))))}}]),t}(a.Component),N=n(102),P=n(112),A=n(110),R=n(49),B=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={winLines:null,balance:0},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e,t){JSON.stringify(t.winLines)!==JSON.stringify(this.state.winLines)&&this.calculateBalance()}},{key:"calculateBalance",value:function(){var e=this.state.winLines,t=[3,4],n=[0,1,2],a=0,i=function(i){var r;r=e[i],t.every((function(e){return r.includes(e)}))&&(a+=75),a+=function(e,t){var n=0;return t.forEach((function(t){var a=e.indexOf(t),i=e.lastIndexOf(t);a>-1&&i>-1&&a!==i&&(n+=5)})),n}(e[i],n),a+=e[i].reduce((function(e,t){return e+R[t].payouts[i]}),0)};for(var r in e)i(r);this.setState({balance:a})}},{key:"render",value:function(){var e=this.state.balance,t=this.props,n=t.updating,a=t.isWinner;return i.a.createElement("div",{className:"balance"},i.a.createElement(N.a,{variant:"outlined"},i.a.createElement(P.a,{htmlFor:"component-outlined"},"Balance"),i.a.createElement(A.a,{id:"component-outlined",className:"balance-field "+(a?"with-blink":""),value:n?"--":e,labelWidth:60})))}}]),t}(a.Component);B.getDerivedStateFromProps=function(e,t){return JSON.stringify(e.winLines)!==JSON.stringify(t.winLines)?{winLines:e.winLines,balance:0}:null};var W=n(50),D=n.n(W),L=function(e){var t=e.disabled,n=e.onClick;return i.a.createElement(k.a,{variant:"extended",color:"primary",className:"spin-button",disabled:t,onClick:n},i.a.createElement(D.a,{className:"spin-icon"}),"Spin\xa0")},x=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={isSpinning:!1,winLines:{top:[],center:[],bottom:[]},backgroundShifts:[],spentCoins:0,isWinner:void 0,mode:"random"},n.onSpinButtonClick=function(){n.setState({isSpinning:!0,spentCoins:0})},n.updateWinInfo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n.setState({winLines:e,isSpinning:!1,spentCoins:n.state.spentCoins+t,isWinner:n.checkIsWinner(e.center)})},n.updateBackgroundShifts=function(e){n.setState({backgroundShifts:e})},n.isDebugMode=function(){return"debug"===n.state.mode},n.switchMode=function(){var e=n.state.mode;n.setState({mode:"debug"===e?"random":"debug",isWinner:void 0,backgroundShifts:[]})},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"checkIsWinner",value:function(e){return e.every((function(t){return t===e[0]}))}},{key:"getWinnerLabel",value:function(){var e=this.state,t=e.isSpinning,n=e.isWinner;return t?"Please wait...":n?"Winner !":"Loser (("}},{key:"render",value:function(){var e=this.state,t=e.isSpinning,n=e.winLines,a=e.mode,r=e.backgroundShifts,o=e.isWinner;return i.a.createElement(d.a,{maxWidth:"sm",className:"slot-machine"},i.a.createElement("div",{className:"content"},i.a.createElement("div",{className:"row label"},void 0!==o?i.a.createElement("div",{className:"title"},this.getWinnerLabel()):i.a.createElement("small",null,"try your fortune !")),i.a.createElement("div",{className:"row slot"},i.a.createElement(g,{isSpinning:t,isDebugMode:"debug"===a,backgroundShifts:r,onStopSpin:this.updateWinInfo})),i.a.createElement("div",{className:"row debug"},i.a.createElement(m.a,{label:"Debug",control:i.a.createElement(f.a,{checked:this.isDebugMode(),disabled:t,value:a,color:"secondary",onChange:this.switchMode})})),i.a.createElement("div",{className:"row controls"},i.a.createElement(B,{updating:t,winLines:n,isWinner:o}),i.a.createElement(L,{disabled:t||this.isDebugMode(),onClick:this.onSpinButtonClick})),i.a.createElement("div",{className:"row"},this.isDebugMode()&&i.a.createElement(C,{onApply:this.updateBackgroundShifts}))))}}]),t}(a.Component);o.a.render(i.a.createElement(x,null),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.23792f8d.chunk.js.map